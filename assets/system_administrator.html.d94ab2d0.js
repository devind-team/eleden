import{_ as t,r as l,o as c,c as o,a as n,b as a,e as i,d as s}from"./app.6fb3dce6.js";const p={},r=i('<h1 id="\u0434\u043B\u044F-\u0441\u0438\u0441\u0442\u0435\u043C\u043D\u044B\u0445-\u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u043E\u0432" tabindex="-1"><a class="header-anchor" href="#\u0434\u043B\u044F-\u0441\u0438\u0441\u0442\u0435\u043C\u043D\u044B\u0445-\u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u043E\u0432" aria-hidden="true">#</a> \u0414\u043B\u044F \u0441\u0438\u0441\u0442\u0435\u043C\u043D\u044B\u0445 \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u043E\u0432</h1><h2 id="\u043C\u0438\u043D\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0435-\u0442\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u044F-\u043A-\u0441\u0435\u0440\u0432\u0435\u0440\u0443" tabindex="-1"><a class="header-anchor" href="#\u043C\u0438\u043D\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0435-\u0442\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u044F-\u043A-\u0441\u0435\u0440\u0432\u0435\u0440\u0443" aria-hidden="true">#</a> \u041C\u0438\u043D\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0435 \u0442\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u044F \u043A \u0441\u0435\u0440\u0432\u0435\u0440\u0443</h2><p>\u0421\u0438\u0441\u0442\u0435\u043C\u043D\u044B\u0435 \u0442\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u044F \u0441\u0435\u0440\u0432\u0435\u0440\u0430:</p><ul><li>\u041E\u0421: \u043B\u044E\u0431\u043E\u0439 \u0434\u0438\u0441\u0442\u0440\u0438\u0431\u0443\u0442\u0438\u0432 Linux(Ubuntu, Debian \u0438 \u0442. \u0434.)</li><li>\u0414\u0432\u0443\u0445\u044A\u044F\u0434\u0435\u0440\u043D\u044B\u0439 \u043F\u0440\u043E\u0446\u0435\u0441\u0441\u043E\u0440 \u0441 \u0447\u0430\u0441\u0442\u043E\u0442\u043E\u0439 2 \u0413\u0413\u0446 \u0438\u043B\u0438 \u043B\u0443\u0447\u0448\u0435</li><li>\u041E\u043F\u0435\u0440\u0430\u0442\u0438\u0432\u043D\u043E\u0439 \u043F\u0430\u043C\u044F\u0442\u0438 \u043C\u0438\u043D\u0438\u043C\u0443\u043C 4 \u0413\u0431</li><li>32 \u0413\u0431 \u0441\u0432\u043E\u0431\u043E\u0434\u043D\u043E\u0433\u043E \u043F\u0440\u043E\u0441\u0442\u0440\u0430\u043D\u0441\u0442\u0432\u0430 \u043D\u0430 \u0436\u0435\u0441\u0442\u043A\u043E\u043C \u0434\u0438\u0441\u043A\u0435</li></ul><p>\u041A\u0440\u043E\u043C\u0435 \u044D\u0442\u043E\u0433\u043E \u043D\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u0434\u043E\u043B\u0436\u043D\u044B \u0431\u044B\u0442\u044C \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u044B \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u043C\u043E\u0441\u0442\u0438:</p>',5),d=n("thead",null,[n("tr",null,[n("th",null,"\u0417\u0430\u0432\u0438\u0441\u0438\u043C\u043E\u0441\u0442\u044C"),n("th",{style:{"text-align":"center"}},"\u0412\u0435\u0440\u0441\u0438\u044F")])],-1),u={href:"https://www.postgresql.org/download/",target:"_blank",rel:"noopener noreferrer"},v=s("PostgreSQL"),k=n("td",{style:{"text-align":"center"}},"latest",-1),m={href:"https://docs.docker.com/engine/install/ubuntu",target:"_blank",rel:"noopener noreferrer"},b=s("docker"),_=n("td",{style:{"text-align":"center"}},"latest",-1),g={href:"https://docs.docker.com/compose/install/compose-desktop",target:"_blank",rel:"noopener noreferrer"},h=s("docker-compose"),y=n("td",{style:{"text-align":"center"}},"latest",-1),w={href:"https://www.nginx.com/resources/wiki/start/topics/tutorials/install/",target:"_blank",rel:"noopener noreferrer"},x=s("Nginx"),f=n("td",{style:{"text-align":"center"}},"latest",-1),E=n("h2",{id:"\u0440\u0430\u0437\u0432\u0435\u0440\u0442\u043A\u0430-\u0438-\u043D\u0430\u0441\u0442\u0440\u043E\u0438\u043A\u0430-\u044D\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0438-\u043E\u0431\u0440\u0430\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u043D\u043E\u0438-\u0441\u0440\u0435\u0434\u044B",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u0440\u0430\u0437\u0432\u0435\u0440\u0442\u043A\u0430-\u0438-\u043D\u0430\u0441\u0442\u0440\u043E\u0438\u043A\u0430-\u044D\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0438-\u043E\u0431\u0440\u0430\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u043D\u043E\u0438-\u0441\u0440\u0435\u0434\u044B","aria-hidden":"true"},"#"),s(" \u0420\u0430\u0437\u0432\u0435\u0440\u0442\u043A\u0430 \u0438 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430 \u044D\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0439 \u043E\u0431\u0440\u0430\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u043D\u043E\u0439 \u0441\u0440\u0435\u0434\u044B")],-1),S=n("p",null,"\u041F\u043E\u0441\u043B\u0435 \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0441\u0435\u0445 \u0437\u0430\u0432\u0438\u0441\u043E\u043C\u043E\u0441\u0442\u0435\u0439 \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E:",-1),R={href:"https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-container-registry",target:"_blank",rel:"noopener noreferrer"},P=s("\u0410\u0443\u0442\u0435\u043D\u0442\u0438\u0444\u0438\u0446\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F \u0432 \u0440\u0435\u0435\u0441\u0442\u0440\u0435 \u043A\u043E\u043D\u0442\u0435\u0439\u043D\u0435\u0440\u043E\u0432"),A=i(`:<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> login ghcr.io -u USERNAME -p TOKEN
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,2),L=i(`<li>\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0434\u0438\u0440\u0435\u043A\u0442\u043E\u0440\u0438\u044E \u0434\u043B\u044F \u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0444\u0430\u0439\u043B\u043E\u0432 \u0438 \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043E\u043D\u043D\u044B\u0435 \u0444\u0430\u0439\u043B\u044B \u0434\u043B\u044F \u0440\u0430\u0437\u0432\u0435\u0440\u0442\u044B\u0432\u0430\u043D\u0438\u044F \u044D\u043B\u0435\u0442\u0440\u043E\u043D\u043D\u043E\u0439 \u043E\u0431\u0440\u0430\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u043D\u043E\u0439 \u0441\u0440\u0435\u0434\u044B: <ol><li>\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0434\u0438\u0440\u0435\u043A\u0442\u043E\u0440\u0438\u0438:<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">mkdir</span> /var/www/eleden/storage 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li>\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0444\u0430\u0439\u043B <code>.env</code> \u0441\u043E \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u043C \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u043C:<div class="language-env_file ext-env_file line-numbers-mode"><pre class="language-env_file"><code># Client settings
# Data connection
APP_NAME=&#39;\u042D\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u0430\u044F \u043E\u0431\u0440\u0430\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u043D\u0430\u044F \u0441\u0440\u0435\u0434\u0430&#39;
URL=https://example.ru
API_URL=http://192.168.1.3:8000/graphql/
API_URL_BROWSER=https://example.ru/graphql/
WS_URL=wss://example.ru/graphql/
CLIENT_ID=
CLIENT_SECRET=
# Settings for sentry
SENTRY_CLIENT_DSN=
TINYMCE_API=
ASK=
# Server settings
SECRET_KEY=
DEBUG=False
# Application database data
DB_APP_HOST=
DB_APP_NAME=
DB_APP_USER=
DB_APP_PASSWORD=
# Email settings
EMAIL_HOST=
EMAIL_HOST_USER=
EMAIL_HOST_PASSWORD=
EMAIL_HOST_SUPPORT=
# Sentry integration
SENTRY_DNS=
# Notification service interation
FCM_API_KEY=
# Settings for celery
REDIS_SERVER=redis
# Data for celery
BROKER_URL=redis://redis:6379
BROKER_BACKEND=redis://redis:6379
TASK_SERIALIZER=json
RESULT_SERIALIZER=json
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li>\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0444\u0430\u0439\u043B <code>docker-compose.yml</code> \u0441\u043E \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u043C \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u043C:<div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3.7&#39;</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> client
    <span class="token key atrule">image</span><span class="token punctuation">:</span> ghcr.io/devind<span class="token punctuation">-</span>team/eleden/eleden<span class="token punctuation">-</span>client<span class="token punctuation">:</span>latest
    <span class="token key atrule">command</span><span class="token punctuation">:</span> yarn run nuxt start
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;3000:3000&quot;</span>
    <span class="token key atrule">env_file</span><span class="token punctuation">:</span> .env

  <span class="token key atrule">api</span><span class="token punctuation">:</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> api
    <span class="token key atrule">image</span><span class="token punctuation">:</span> ghcr.io/devind<span class="token punctuation">-</span>team/eleden/eleden<span class="token punctuation">-</span>server<span class="token punctuation">:</span>latest
    <span class="token key atrule">command</span><span class="token punctuation">:</span> poetry run daphne <span class="token punctuation">-</span>b 0.0.0.0 <span class="token punctuation">-</span>p 8000 devind.asgi<span class="token punctuation">:</span>application
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;8000:8000&quot;</span>
    <span class="token key atrule">env_file</span><span class="token punctuation">:</span> .env
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;/var/www/eleden/storage:/usr/src/app/storage&quot;</span>

  <span class="token key atrule">celery</span><span class="token punctuation">:</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> celery
    <span class="token key atrule">image</span><span class="token punctuation">:</span> ghcr.io/devind<span class="token punctuation">-</span>team/eleden/eleden<span class="token punctuation">-</span>server<span class="token punctuation">:</span>latest
    <span class="token key atrule">command</span><span class="token punctuation">:</span> poetry run celery <span class="token punctuation">-</span>A devind worker <span class="token punctuation">-</span>B <span class="token punctuation">-</span>E <span class="token punctuation">-</span>l INFO
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">env_file</span><span class="token punctuation">:</span> .env
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;/var/www/eleden/storage:/usr/src/app/storage&quot;</span>

  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> redis
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></li><li>\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0438 \u0437\u0430\u043F\u0443\u0441\u0442\u0438\u0442\u044C \u0434\u043E\u043A\u0435\u0440 \u043A\u043E\u043D\u0442\u0435\u0439\u043D\u0435\u0440\u044B: <blockquote><p>\u041A\u043E\u043C\u0430\u043D\u0434\u044B <code>docker-compose</code> \u0432\u044B\u043F\u043E\u043B\u043D\u044F\u044E\u0441\u044F \u0432 \u0434\u0438\u0440\u0435\u043A\u0442\u043E\u0440\u0438\u0438, \u0433\u0434\u0435 \u043D\u0430\u0445\u043E\u0434\u0438\u0442\u0441\u044F \u0444\u0430\u0439\u043B <code>docker-compose.yml</code></p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u0418\u0437\u0432\u043B\u0435\u0447\u0435\u043D\u0438\u0435 \u043E\u0431\u0440\u0430\u0437\u0430</span>
<span class="token function">sudo</span> <span class="token function">docker-compose</span> pull
<span class="token comment"># \u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0438 \u0437\u0430\u043F\u0443\u0441\u043A \u043A\u043E\u043D\u0442\u0435\u0439\u043D\u0435\u0440\u043E\u0432</span>
<span class="token function">sudo</span> <span class="token function">docker-compose</span> up -d
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li>\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0438 \u043D\u0430\u0441\u0442\u0440\u043E\u0438\u0442\u044C \u0431\u0430\u0437\u0443 \u0434\u0430\u043D\u043D\u044B\u0445: <ol><li>\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F, \u0431\u0430\u0437\u044B \u0434\u0430\u043D\u043D\u044B\u0445 \u0438 \u043F\u0440\u0438\u0441\u0432\u043E\u0435\u043D\u0438\u0435 \u0432\u0441\u0435\u0445 \u043F\u0440\u0438\u0432\u0438\u043B\u0435\u0433\u0438\u0439 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044E \u043D\u0430\u0434 \u0431\u0430\u0437\u043E\u0439 \u0434\u0430\u043D\u043D\u044B\u0445:</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u041F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0435 \u043A PostgreSQL</span>
<span class="token function">sudo</span> psql -U postgres
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-PostgreSQL ext-PostgreSQL line-numbers-mode"><pre class="language-PostgreSQL"><code>create user username with encrypted password &#39;user_password&#39;;
create database database_name;
grant all privileges on database database_name to username;
grant connect on database database_name TO username;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043E\u043D\u043D\u044B\u0439 \u0444\u0430\u0439\u043B PostgreSQL(<code>/etc/postgresql/latest_version/main/</code>), \u0434\u043E\u0431\u0430\u0432\u0438\u0432 \u0432 \u043D\u0435\u0433\u043E \u0437\u0430\u043F\u0438\u0441\u0438:</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>host    database_name         username        ip_addres_docker_container/24           md5
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol><li>\u041F\u0435\u0440\u0435\u0437\u0430\u043F\u0443\u0441\u0442\u0438\u0442\u044C PostgreSQL</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">service</span> postgresql restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li>\u041D\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u0435 \u0431\u0430\u0437\u044B \u0434\u0430\u043D\u043D\u044B\u0445 \u043D\u0430\u0447\u0430\u043B\u044C\u043D\u044B\u043C\u0438 \u0434\u0430\u043D\u043D\u044B\u043C\u0438:<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0442\u0430\u0431\u043B\u0438\u0446 \u0432 \u0431\u0430\u0437\u0435 \u0434\u0430\u043D\u043D\u044B\u0445</span>
<span class="token function">sudo</span> <span class="token function">docker-compose</span> run api poetry run python manage.py migrate
<span class="token comment"># \u041D\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u0435 \u0431\u0430\u0437\u044B \u0434\u0430\u043D\u043D\u044B\u0445 \u043D\u0430\u0447\u0430\u043B\u044C\u043D\u044B\u043C\u0438 \u0434\u0430\u043D\u043D\u044B\u043C\u0438</span>
<span class="token function">sudo</span> <span class="token function">docker-compose</span> run api poetry run python manage.py fs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li>\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430 <code>nginx</code><ol><li>\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0444\u0430\u0439\u043B \u0432 <code>/etc/nginx/sites-available</code> \u0441\u043E \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u043C \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u043C:</li></ol><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">upstream</span> channels-site</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">server</span> localhost:8000</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span> <span class="token number">443</span> ssl http2</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span> site.ru www.site.ru</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">access_log</span> /var/log/nginx/site.ru.access.log</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">error_log</span> /var/log/nginx/site.ru.error.log</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">client_max_body_size</span> <span class="token number">32m</span></span><span class="token punctuation">;</span>

    <span class="token comment">#ssl on;</span>
    <span class="token directive"><span class="token keyword">ssl_certificate</span> /etc/ssl/certificate/site.crt</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">ssl_certificate_key</span> /etc/ssl/certificate/site.key</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">location</span> /storage/</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">alias</span> /var/www/site/storage/</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token directive"><span class="token keyword">location</span> /graphql/</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">proxy_pass</span> http://channels-site</span><span class="token punctuation">;</span>

        <span class="token directive"><span class="token keyword">proxy_http_version</span> 1.1</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> Upgrade <span class="token variable">$http_upgrade</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> Connection <span class="token string">&quot;upgrade&quot;</span></span><span class="token punctuation">;</span>

        <span class="token directive"><span class="token keyword">proxy_redirect</span> <span class="token boolean">off</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> Host <span class="token variable">$host</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Real-IP <span class="token variable">$remote_addr</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Forwarded-Host <span class="token variable">$server_name</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">proxy_pass</span> http://localhost:3000</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> Host <span class="token variable">$host</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Real-IP <span class="token variable">$remote_addr</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span> <span class="token number">80</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span> site.ru www.site.ru</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">return</span> <span class="token number">301</span> https://<span class="token variable">$host</span><span class="token variable">$request_uri</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0441\u0438\u043C\u0432\u043E\u043B\u0438\u0447\u0435\u0441\u043A\u0443\u044E \u0441\u0441\u044B\u043B\u043A\u0443 \u0441\u043E\u0437\u0434\u0430\u043D\u043D\u043E\u0433\u043E \u0444\u0430\u0439\u043B\u0430 \u0432 <code>/etc/nginx/sites-enabled</code>:</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">ln</span> -s /etc/nginx/sites-available/file_name.conf /etc/nginx/sites-enabled
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>\u041F\u0435\u0440\u0435\u0437\u0430\u043F\u0443\u0441\u0442\u0438\u0442\u044C <code>nginx</code></li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>sudo service nginx restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li>`,5);function I(q,N){const e=l("ExternalLinkIcon");return c(),o("div",null,[r,n("table",null,[d,n("tbody",null,[n("tr",null,[n("td",null,[n("a",u,[v,a(e)])]),k]),n("tr",null,[n("td",null,[n("a",m,[b,a(e)])]),_]),n("tr",null,[n("td",null,[n("a",g,[h,a(e)])]),y]),n("tr",null,[n("td",null,[n("a",w,[x,a(e)])]),f])])]),E,S,n("ol",null,[n("li",null,[n("a",R,[P,a(e)]),A]),L])])}var D=t(p,[["render",I],["__file","system_administrator.html.vue"]]);export{D as default};
